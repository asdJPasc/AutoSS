var sesionNavegador,fromId,isIE,_parametrosInitChat,surveyStars,propiedades={},inicializado=!1,HTMLcargado=!1,currentHTMLToggle=!1,fromComplement="",bolsaQA=!1,email="",name="",urlBaseStatic="./resources",script=document.createElement("script"),storeConversation=[],config=!1,getHtmlActionButton=function(e){var t="";if("text"==e.action)t+='<input id="gb-btnOptions" type="button" value="'+e.text+'" onclick="sendOption(this.value);"></input></li>';else if("geoLocation"==e.action){var i=e.args&&e.args.length>0?e.args[0]:"";t+='<input id="gb-btnOptions" type="button" value="'+e.text+'" onclick="showGeoLocation(\''+i+"')\"></input></li>"}else if("findNearbyPlace"==e.action){i=e.args&&e.args.length>0?e.args[0]:"";t+='<input id="gb-btnOptions" type="button" value="'+e.text+'" onclick="initMap(\''+i+"')\"></input></li>"}else if("url"==e.action){i=e.args&&e.args.length>0?e.args[0]:"#";t+='<input id="gb-btnOptions" type="button" value="'+e.text+'" onclick="openURL(\''+i+"')\"></input></li>"}else if("openYoutubeVideo"==e.action||"video"==e.action){i=e.args&&e.args.length>0?e.args[0]:"#";t+='<input id="gb-btnOptions" type="button" value="'+e.text+'" onclick="openYoutubeVideo(\''+i+"')\"></input></li>"}else if("openGenericContent"==e.action){i=e.args&&e.args.length>0?e.args[0]:"";t+='<input id="gb-btnOptions" type="button" value="'+e.text+'" onclick="openGenericContent(\''+i+"')\"></input></li>"}else if("openSimulator"==e.action){i=e.args&&e.args.length>0?e.args[0]:"",i=e.args&&e.args.length>0?e.args[0]:"#";t+='<input id="gb-btnOptions" type="button" value="'+e.text+'" onclick="openSimulator()"></input></li>'}return t};function GB_INIT_CHAT(e){if(!e)return console.log("GB_INIT_CHAT sin parametros");checkCookie(),msieversion(),_parametrosInitChat=JSON.parse(JSON.stringify(e)),e&&e.websocket_url?e&&e.type?e&&e.channel?e&&e.service_key?(urlBaseStatic="5c09761e09e8cc71486a22d8"==e.channel?"https://admin-bcs.gatblac.com":"./resources",websocket=new WebSocket(e.websocket_url),websocket.onopen=async function(t){libsHTML(),websocket.send(JSON.stringify({type:e.type,channel:e.channel,service_key:e.service_key}))},websocket.onclose=function(e){$("#msgStatus").hide(),inicializado?($("#gb-messages").append($('<li style="text-align: center; margin-bottom: 0">').html("<strong>SISTEMA</strong>: "+urlify("Se ha perdido la conexión."))),$("#gb-messages").append($('<li id="liAlertaConexion" style="text-align: center;">').html('<input id="botonAlertaConexion" style="background:black; color: white; width: 60% !important; border-radius:20px 20px" type="button" value="Reconectar" onclick="re_GB_INIT_CHAT()"></input>')),$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},500)):($("#gb-advertencia").append($("<li>").html("<strong>SISTEMA</strong>: "+urlify("Se ha perdido la conexión."))),$("#gb-advertencia").append($('<li id="liAlertaConexion">').html('<input id="botonAlertaConexion" style="background:black; color: white; width: 60% !important; border-radius:20px 20px" type="button" value="Reconectar" onclick="re_GB_INIT_CHAT()"></input>')))},websocket.onmessage=function(e){var t,i={};let a=new Date;try{i=JSON.parse(e.data)}catch(t){console.log(e.data)}var s="";if("config"==i.type)if(i.channel.enabled&&i.channel.chat_enabled){if(isIE&&!i.channel.navigator_ie_enabled)return void console.log("chat ie off");if(i.channel.chat_always_on||i.timeZoneOffSet&&(t=!0),t)return websocket.onclose=function(){},websocket.close(),void console.log("El Chat no funciona a esta hora :(");setProps(i.channel),HTML(),$("#gb-advertencia").hide()}else websocket.onclose=function(){},websocket.close(),1==HTMLcargado&&$("#webchat").html(""),console.log("Configuración chat deshabilitado");else if("init"===i.type){let e;$("#gb-advertencia").remove(),$("#name").val(i.respuestaInit.first_name||""),$("#email").val(i.respuestaInit.email||"");let t="";if(0!==i.respuestaInit.length&&i.respuestaInit.messages&&0!==i.respuestaInit.messages.length&&"5c70124f2e40af005f6d0bf8"!==i.data.channel){let a=new Date(i.respuestaInit.messages[i.respuestaInit.messages.length-1].creation_date),r=new Date(Date.now()-1e3*propiedades.widget_session_expiration_seconds);if(void 0===_parametrosInitChat.mode&&a<r)return console.log("Se reinicia caché"),$("#name").val(""),resetCookie(),void re_GB_INIT_CHAT();$("#gb-messages").show(),$("#gb-name-div").hide(),$("#gb-input-div").show(),$("#gb-input-div").css("display","block"),$("#gb-advertencia").hide(),$("#message").show(),$("#message").submit(),showChat();for(var o=0;o<i.respuestaInit.messages.length;o++)if(1!=i.respuestaInit.messages[o].manual_conversation){var n=new Date(i.respuestaInit.messages[o].creation_date);e=($("#name").val()?$("#name").val():"").trim()||"Usuario",isJson(i.respuestaInit.messages[o].input)||(t="<strong> "+e+"</strong>: "+urlify(i.respuestaInit.messages[o].input),t+='<span class="time">'+n.toTimeString().split(" ")[0].substring(0,5)+"</span>",$("#gb-messages").append($('<li class="msg-client">').html(t))),!1===isIE&&i.respuestaInit.messages[o].response_object.voice&&(s='<p class="voiceAnswer"><strong>Reproducir respuesta </strong><i id="voiceAnswerIcon" class="fa fa-play" data-voice='+JSON.stringify(i.message.voice)+'  onclick="playVoice(this)"></i></p>'),"text"==i.respuestaInit.messages[o].response_object.type&&(t="<div id="+i.respuestaInit.messages[o]._id+">",t+="<strong> "+propiedades.asistenteName+"</strong>: "+urlify(i.respuestaInit.messages[o].response_object.text.replace("{assistant_name}",propiedades.asistenteName))+"<br><br> "+s,t+='<span class="time">'+n.toTimeString().split(" ")[0].substring(0,5)+"</span>",""!=i.respuestaInit.messages[o].score?(t+='<div class="feedback">',t+="Ya calificaste esta respuesta.",t+="</div>"):(t+='<div class="feedback">',t+="Califica esta respuesta &nbsp;&nbsp;",t+='<img id="goodAnswer" src="'+urlBaseStatic+'/img/thumbs-up.png" onclick="sendFeedback(this)"></img>&nbsp;&nbsp;',t+='<img id="badAnswer" src="'+urlBaseStatic+'/img/thumbs-down.png" onclick="sendFeedback(this)"></img>',t+="</div>"),$("#gb-messages").append($('<li class="msg-bot">').html(t))),"button"==i.respuestaInit.messages[o].response_object.type&&(t="<div id="+i.respuestaInit.messages[o]._id+">",t+="<strong> "+propiedades.asistenteName+"</strong>: "+urlify(i.respuestaInit.messages[o].response_object.text.replace("{assistant_name}",propiedades.asistenteName))+"<br><br> "+s,t+='<span class="time">'+n.toTimeString().split(" ")[0].substring(0,5)+"</span>",""!=i.respuestaInit.messages[o].score?(t+='<div class="feedback">',t+="Ya calificaste esta respuesta.",t+="</div>"):(t+='<div class="feedback">',t+="Califica esta respuesta &nbsp;&nbsp;",t+='<img id="goodAnswer" src="'+urlBaseStatic+'/img/thumbs-up.png" onclick="sendFeedback(this)"></img>&nbsp;&nbsp;',t+='<img id="badAnswer" src="'+urlBaseStatic+'/img/thumbs-down.png" onclick="sendFeedback(this)"></img>',t+="</div>"),$("#gb-messages").append($('<li class="msg-bot">').html(t))),"buttonslider"==i.respuestaInit.messages[o].response_object.type&&(t="<div id="+i.respuestaInit.messages[o]._id+">",t+="<strong> "+propiedades.asistenteName+"</strong>: "+urlify(i.respuestaInit.messages[o].response_object.content[0].text.replace("{assistant_name}",propiedades.asistenteName))+"<br><br> "+s,t+='<span class="time">'+n.toTimeString().split(" ")[0].substring(0,5)+"</span>",""!=i.respuestaInit.messages[o].score?(t+='<div class="feedback">',t+="Ya calificaste esta respuesta.",t+="</div>"):(t+='<div class="feedback">',t+="Califica esta respuesta &nbsp;&nbsp;",t+='<img id="goodAnswer" src="'+urlBaseStatic+'/img/thumbs-up.png" onclick="sendFeedback(this)"></img>&nbsp;&nbsp;',t+='<img id="badAnswer" src="'+urlBaseStatic+'/img/thumbs-down.png" onclick="sendFeedback(this)"></img>',t+="</div>"),$("#gb-messages").append($('<li class="msg-bot">').html(t))),"end_without_survey"==i.respuestaInit.messages[o].response_object.type&&(t="<div id="+i.respuestaInit.messages[o]._id+">",t+="<strong> "+propiedades.asistenteName+"</strong>: "+urlify(i.respuestaInit.messages[o].response_object.text.replace("{assistant_name}",propiedades.asistenteName))+"<br><br> "+s,t+='<span class="time">'+n.toTimeString().split(" ")[0].substring(0,5)+"</span>",""!=i.respuestaInit.messages[o].score?(t+='<div class="feedback">',t+="Ya calificaste esta respuesta.",t+="</div>"):(t+='<div class="feedback">',t+="Califica esta respuesta &nbsp;&nbsp;",t+='<img id="goodAnswer" src="'+urlBaseStatic+'/img/thumbs-up.png" onclick="sendFeedback(this)"></img>&nbsp;&nbsp;',t+='<img id="badAnswer" src="'+urlBaseStatic+'/img/thumbs-down.png" onclick="sendFeedback(this)"></img>',t+="</div>"),$("#gb-messages").append($('<li class="msg-bot">').html(t))),"end_with_survey"==i.respuestaInit.messages[o].response_object.type&&(t="<div id="+i.respuestaInit.messages[o]._id+">",t+="<strong> "+propiedades.asistenteName+"</strong>: "+urlify(i.respuestaInit.messages[o].response_object.text.replace("{assistant_name}",propiedades.asistenteName))+"<br><br> "+s,t+='<span class="time">'+n.toTimeString().split(" ")[0].substring(0,5)+"</span>",""!=i.respuestaInit.messages[o].score?(t+='<div class="feedback">',t+="Ya calificaste esta respuesta.",t+="</div>"):(t+='<div class="feedback">',t+="Califica esta respuesta &nbsp;&nbsp;",t+='<img id="goodAnswer" src="'+urlBaseStatic+'/img/thumbs-up.png" onclick="sendFeedback(this)"></img>&nbsp;&nbsp;',t+='<img id="badAnswer" src="'+urlBaseStatic+'/img/thumbs-down.png" onclick="sendFeedback(this)"></img>',t+="</div>"),$("#gb-messages").append($('<li class="msg-bot">').html(t))),"survey-response"==i.respuestaInit.messages[o].response_object.type&&(t="<div id="+i.respuestaInit.messages[o]._id+">",t+="<strong> "+propiedades.asistenteName+"</strong>: "+urlify(i.respuestaInit.messages[o].response_object.text.replace("{assistant_name}",propiedades.asistenteName))+"<br><br> "+s,t+='<span class="time">'+n.toTimeString().split(" ")[0].substring(0,5)+"</span>",""!=i.respuestaInit.messages[o].score?(t+='<div class="feedback">',t+="Ya calificaste esta respuesta.",t+="</div>"):(t+='<div class="feedback">',t+="Califica esta respuesta &nbsp;&nbsp;",t+='<img id="goodAnswer" src="'+urlBaseStatic+'/img/thumbs-up.png" onclick="sendFeedback(this)"></img>&nbsp;&nbsp;',t+='<img id="badAnswer" src="'+urlBaseStatic+'/img/thumbs-down.png" onclick="sendFeedback(this)"></img>',t+="</div>"),$("#gb-messages").append($('<li class="msg-bot">').html(t))),"end_conversation"===i.respuestaInit.messages[o].response_object.type&&i.respuestaInit.messages[o].response_object.text&&(t="<div id="+i.respuestaInit.messages[o]._id+">",t+="<strong> "+propiedades.asistenteName+"</strong>: "+urlify(i.respuestaInit.messages[o].response_object.text.replace("{assistant_name}",propiedades.asistenteName))+"<br><br> "+s,t+='<span class="time">'+n.toTimeString().split(" ")[0].substring(0,5)+"</span>",""!=i.respuestaInit.messages[o].score?(t+='<div class="feedback">',t+="Ya calificaste esta respuesta.",t+="</div>"):(t+='<div class="feedback">',t+="Califica esta respuesta &nbsp;&nbsp;",t+='<img id="goodAnswer" src="'+urlBaseStatic+'/img/thumbs-up.png" onclick="sendFeedback(this)"></img>&nbsp;&nbsp;',t+='<img id="badAnswer" src="'+urlBaseStatic+'/img/thumbs-down.png" onclick="sendFeedback(this)"></img>',t+="</div>"),$("#gb-messages").append($('<li class="msg-bot">').html(t))),t=""}$("#chatContainer").css("display","block"),$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},300)}else t+="<strong>"+propiedades.asistenteName+"</strong>: ",t+=mensajeBienvenidaParse(propiedades.mensaje_bienvenida_login).replace("{assistant_name}",propiedades.asistenteName).replace("{name}",name).replace("{{mail}}",email),t+='<span class="time">'+a.toTimeString().split(" ")[0].substring(0,5)+"</span>",$("#msgStatus").show(),window.setTimeout(function(){$("#gb-messages").append($('<li class="msg-bot">').html('<div style="padding: 0px 10px;">'+t+"</div>")),$("#msgStatus").hide()},1e3)}else if(i.message){let e;if(i.name=i.name||"Usuario",n=(n=moment.utc(i.date)).utcOffset(moment().utcOffset()),setTimeout(()=>{$("#msgStatus").hide()},1e3),1==i.isBot){if("buttonslider"==i.message.type&&!i.message.content)return;if("buttonslider"!=i.message.type&&!i.message.text)return}storeConversation.push(i);var r="msg-client";if("chat_user"!=i.origin&&(e="Ejecutivo",$("#msgStatus").hide(),r="msg-bot"),i.message.voice&&!1===isIE&&(s='<p class="voiceAnswer"><strong>Reproducir respuesta </strong><i id="voiceAnswerIcon" class="fa fa-play" data-voice='+JSON.stringify(i.message.voice)+'  onclick="playVoice(this)"></i></p>'),"text"==i.message.type){var l=urlify(i.message.text.replace("{assistant_name}",propiedades.asistenteName));if(i.message.text){var d="<div id="+i.message.chatId+">";d+="<strong> "+i.name+"</strong>: "+l+"<br><br> "+s,d+='<span class="time">'+n.format("HH:mm")+"</span>","msg-bot"===r&&(d+='<div class="feedback">',d+="Por favor, califica esta respuesta &nbsp;&nbsp;",d+='<img id="goodAnswer" src="'+urlBaseStatic+'/img/thumbs-up.png" onclick="sendFeedback(this)"></img>&nbsp;&nbsp;',d+='<img id="badAnswer" src="'+urlBaseStatic+'/img/thumbs-down.png" onclick="sendFeedback(this)"></img>',d+="</div>"),$("#gb-messages").append($('<li class="'+r+'">').html(d)),$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},500)}}else if("button"==i.message.type){var p="<strong> "+i.name+"</strong>: ";if(i.message.image&&(p+='<div style="text-align: center; height:150px; width:100%;"><img src="'+i.message.image+'" style="max-height:100%"></div>'),i.message.tittle&&(p+='<h4 id="tittle">'+i.message.tittle+"</h4>"),i.message.text&&(p+="<p>"+urlify(i.message.text)+"</p>",p+=s+"<br>"),i.message.buttons){for(var c in p+='<div style="text-align: center;">',i.message.buttons){var g=i.message.buttons[c];g=JSON.stringify(g),(g=JSON.parse(g)).action||(g={action:"text",text:g}),p+=getHtmlActionButton(g)}p+="</div>"}p+='<span class="time">'+n.format("HH:mm")+"</span>",$("#gb-messages").append($('<li class="'+r+'">').html(p)),$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},500)}else if("suggestions"==i.message.type){var m="<strong> "+i.name+"</strong>: "+i.message.text;if(i.message.suggestions.length>0){for(var c in m+="<br><p>"+i.message.suggestions_text+"</p>",m+='<div style="text-align: center;">',i.message.suggestions){g=i.message.suggestions[c];g=JSON.stringify(g),(g=JSON.parse(g)).action||(g={action:"text",text:g}),m+=getHtmlActionButton(g)}m+="</div>"}m+='<span class="time">'+n.format("HH:mm")+"</span>",$("#gb-messages").append($('<li class="'+r+'">').html(m)),$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},500)}else if("form"==i.message.type){$("#gb-messages").css("display","none"),$("#formMessage").css("display","block"),$("#message").prop("disabled",!0),$("#sendMessageBtn").prop("disabled",!0);var u="";if(i.message.tittle&&(u+="<h4>"+i.message.tittle+"</h4>"),i.message.text&&(u+="<p>"+i.message.text+"</p>"),i.message.tittle.includes("Simulador"))u+='<li><label>Valor Propiedad</label><input type="text" placeholder="Valor Propiedad"></li>',u+='<li><label>Tipo</label><select style="width: 79%;"><option value="departamento" selected>Departamento</option><option value="casa">Casa</option></select></li>',u+='<li><label>Antigüedad</label><select style="width: 79%;"><option value="nuevo">Nuevo</option><option value="usado">Usado</option></select></li>';else for(var c in i.message.fields)u+="<li><label>"+i.message.fields[c]+'</label><input id="'+c+i.message.fields[c]+'" type="text" placeholder="'+i.message.fields[c]+'"></li>';u+="<button onclick='cancelForm();'>Cancelar</button>",u+="<button onclick='sendForm(this);' data-message='"+JSON.stringify(i.message)+"'>Enviar</button>",$("#formMessage").html(u)}else if("buttonslider"==i.message.type){var b="slider_"+(new Date).getUTCMilliseconds(),h='<div style="padding: 0px 10px;">';for(var o in h+="<strong> "+i.name+"</strong>: ",h+='<div id="'+b+'" style="position: relative;">',i.message.content){if(h+='<div class="mySlides">',i.message.content[o].image&&(h+='<div style="text-align: center;"><img src="'+i.message.content[o].image+'" style="width:'+propiedades.imagenChatWidth+"; max-width: "+propiedades.imagenChatMaxWidth+';"></div>'),i.message.content[o].tittle&&(h+='<h4 id="tittle">'+i.message.content[o].tittle+"</h4>"),i.message.content[o].text&&(h+="<p>"+urlify(i.message.content[o].text)+"</p>"),i.message.content[o].buttons){for(var c in h+='<div style="text-align: center;">',i.message.content[o].buttons){g=i.message.content[o].buttons[c];g=JSON.stringify(g),(g=JSON.parse(g)).action||(g={action:"text",text:g}),h+=getHtmlActionButton(g)}h+="</div>"}h+="</div>"}h+="</div>",h+='<div id="sliders" style="position: relative;">',h+='<a class="sliderPrev" onclick="showSlides(-1,\''+b+"')\">&#10094;</a>",h+='<a class="sliderNext" onclick="showSlides(1,\''+b+"')\">&#10095;</a>",h+="</div>",h+='<span class="time">'+n.format("HH:mm")+"</span>",h+="</div>",$("#gb-messages").append($('<li class="'+r+'">').html(h)),$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},500),showSlides(0,b),$("#webchat #"+b+", #sliders").css({display:"inline-block","vertical-align":"middle"})}else if("survey"==i.message.type){let e=buildSurvey(i.message.params);"5c09761e09e8cc71486a22d8"==i.message.channel?(openSurvey(e),document.getElementById("survey-send-button").disabled=!1,document.getElementById("survey-cancel-button").disabled=!1):($("#gb-messages").append('<li id="survey_li" style="background-color: #eee; color: #1a1a1a;">'+e+"</li>"),document.getElementById("survey-send-button").disabled=!1,document.getElementById("survey-cancel-button").disabled=!1,$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},500)),document.getElementById("message").disabled=!0,$("#message").attr("placeholder","↑ ↑ ↑ ↑ Responde o Cancela la encuesta ↑ ↑ ↑ ↑"),document.getElementById("sendMessageBtn").disabled=!0}else if("end_conversation"==i.message.type)d="<div id="+i.message.chatId+">",d+="<strong> "+i.name+"</strong>: "+i.message.text,d+="<br>",d+='<span class="time">'+n.format("HH:mm")+"</span>",d+='<div class="feedback">',d+="Por favor, califica esta respuesta &nbsp;&nbsp;",d+='<img id="goodAnswer" src="'+urlBaseStatic+'/img/thumbs-up.png" onclick="sendFeedback(this)"></img>&nbsp;&nbsp;',d+='<img id="badAnswer" src="'+urlBaseStatic+'/img/thumbs-down.png" onclick="sendFeedback(this)"></img>',d+="</div>",setTimeout(()=>{$("#gb-messages").append($('<li class="msg-bot">').html(d))},500),$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},500),setTimeout(()=>{websocket.send(JSON.stringify({type:"init",from_id:fromId,channel:_parametrosInitChat.channel})),"5c70124f2e40af005f6d0bf8"==i.message.channel&&$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},3e3),$("#gb-messages").empty()},3e3),"5c09761e09e8cc71486a22d8"==i.message.channel&&setTimeout(()=>{toggleChat()},5e3);else if("end_without_survey"==i.message.type){console.log("mensaje de tipo end_without_survey");d="<div id="+i.message.chatId+">";d+="<strong> "+i.name+"</strong>: "+i.message.text,d+='<span class="time">'+n.format("HH:mm")+"</span>",d+="<br>",d+='<div class="feedback">',d+="Por favor, califica esta respuesta &nbsp;&nbsp;",d+='<img id="goodAnswer" src="'+urlBaseStatic+'/img/thumbs-up.png" onclick="sendFeedback(this)"></img>&nbsp;&nbsp;',d+='<img id="badAnswer" src="'+urlBaseStatic+'/img/thumbs-down.png" onclick="sendFeedback(this)"></img>',d+="</div>",setTimeout(()=>{$("#gb-messages").append($('<li class="msg-bot">').html(d))},500),$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},500),setTimeout(()=>{websocket.send(JSON.stringify({type:"init",from_id:fromId,channel:_parametrosInitChat.channel})),"5c70124f2e40af005f6d0bf8"==i.message.channel&&$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},3e3),$("#gb-messages").empty()},3e3),"5c09761e09e8cc71486a22d8"==i.message.channel&&setTimeout(()=>{toggleChat()},5e3)}else if("end_with_survey"==i.message.type){console.log("mensaje de tipo end_with_survey");d="<div id="+i.message.chatId+">";d+="<strong> "+i.name+"</strong>: "+i.message.text,d+='<span class="time">'+n.format("HH:mm")+"</span>",d+="<br>",d+='<div class="feedback">',d+="Por favor, califica esta respuesta &nbsp;&nbsp;",d+='<img id="goodAnswer" src="'+urlBaseStatic+'/img/thumbs-up.png" onclick="sendFeedback(this)"></img>&nbsp;&nbsp;',d+='<img id="badAnswer" src="'+urlBaseStatic+'/img/thumbs-down.png" onclick="sendFeedback(this)"></img>',d+="</div>",setTimeout(()=>{$("#gb-messages").append($('<li class="msg-bot">').html(d))},500),$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},500),setTimeout(()=>{websocket.send(JSON.stringify({type:"init",from_id:fromId,channel:_parametrosInitChat.channel})),"5c70124f2e40af005f6d0bf8"==i.message.channel&&$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},3e3),$("#gb-messages").empty()},3e3),"5c09761e09e8cc71486a22d8"==i.message.channel&&setTimeout(()=>{toggleChat()},5e3)}else if("audioNotification"==i.message.type)audio.play();else{if(i.name=i.name||"Usuario",e&&(i.name=e),!isJson(i.message)&&!i.message.type){h="<strong> "+i.name+"</strong>: "+urlify(i.message);h+='<span class="time">'+n.format("HH:mm")+"</span>",$("#gb-messages").append($('<li class="'+r+'">').html(h)),$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},500)}if(isNaN(i.message))"survey-response"==i.message.type&&console.log("mensaje de tipo survey");else{h="<strong> "+i.name+"</strong>: "+i.message;h+='<span class="time">'+n.format("HH:mm")+"</span>",$("#gb-messages").append($('<li class="'+r+'">').html(h)),$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},500)}}}else"score"==i.type?i.respuestaScore.status&&$("#"+i.respuestaScore.chat_id).children("div").html("Gracias!, tu feedback nos ayuda a mejorar."):console.log("mensaje sin formato")},websocket.onerror=function(e){var t=e.data||"Conexión a websocket.";inicializado?$("#gb-messages").append($("<li>").html('<span style="color: red;">ERROR:</span> '+t)):$("#gb-advertencia").append($("<li>").html('<span style="color: red;">ERROR:</span> '+t)),console.log("ERROR")}):console.error("Debes ingresar parametro service_key"):console.error("Debes ingresar parametro channel"):console.error("Debes ingresar parametro type"):console.error("Debes ingresar parametros de configuracion")}function setProps(e){propiedades.chat_widget=!!e.plugin_chat_widget,propiedades.enabled_audio=!!e.plugin_enabled_audio,propiedades.plugin_audio_sound=e.plugin_audio_sound||propiedades.plugin_audio_sound||urlBaseStatic+"/audio/notification.mp3",audio=new Audio(propiedades.plugin_audio_sound),propiedades.plugin_loading_message=e.plugin_loading_message||propiedades.plugin_loading_message||urlBaseStatic+"/img/typing01.gif",propiedades.tipo_chat=e.plugin_chat_type||propiedades.tipo_chat||"privado",propiedades.chat_abierto=!!e.plugin_chat_abierto,propiedades.enabled_input_email=!!e.plugin_enabled_input_email,propiedades.required_input_email=!!e.plugin_required_input_email,propiedades.enabled_input_name=!!e.plugin_enabled_input_name,propiedades.required_input_name=!!e.plugin_required_input_name,propiedades.enabled_info=!!e.plugin_enabled_info,propiedades.enabled_pdf_save=!!e.plugin_enabled_pdf_save,propiedades.texto_ingresar=e.plugin_button_login_text||propiedades.texto_ingresar||"Ingresar",propiedades.texto_enviar=e.plugin_button_send_text||propiedades.texto_enviar||"Enviar",propiedades.titulo_ventana=e.plugin_chat_title||propiedades.titulo_ventana||"Asistente Virtual",propiedades.style_title_background_color=e.plugin_title_background_color||propiedades.style_header_background_color||"#388ADC",propiedades.style_title_font_color=e.plugin_title_font_color||propiedades.style_title_font_color||"#E9DFDF",propiedades.style_title_border_radius_left=e.plugin_title_border_radius_left||propiedades.style_title_border_radius_left||15,propiedades.style_title_border_radius_right=e.plugin_title_border_radius_right||propiedades.style_title_border_radius_right||15,propiedades.style_header_background_color=e.plugin_header_background_color||propiedades.style_header_background_color||"#388ADC",propiedades.asistenteName=e.plugin_asistente_name||propiedades.asistenteName||"Lara",propiedades.asistenteCargo=e.plugin_asistente_cargo||propiedades.asistenteCargo||"Asistente",propiedades.asistenteAvatar=e.plugin_asistente_avatar||propiedades.asistenteAvatar||"./img/Animacion_Asistente_Escuchando_Rostro.gif",propiedades.asistenteAvatarWidth=e.plugin_asistente_avatar_width||propiedades.asistenteAvatarWidth||80,propiedades.asistenteAvatarHeight=e.plugin_asistente_avatar_height||propiedades.asistenteAvatarHeight||80,propiedades.mensaje_bienvenida_login=e.plugin_mensaje_bienvenida_login||propiedades.mensaje_bienvenida_login||"Bienvenidos!",propiedades.style_backgroundcolor=e.plugin_chat_background_color||propiedades.style_backgroundcolor||"#FFFFFF",propiedades.style_background_image=e.plugin_background_image||propiedades.style_background_image||"",propaux={},propiedades.style_position=e.plugin_style_position||propiedades.style_position||"bottom-right","left"!=propiedades.style_position&&"right"!=propiedades.style_position||(propiedades.style_position="bottom-"+propiedades.style_position);var t=propiedades.style_position.split("-");propaux.cssY=t&&t[0]?t[0]:"bottom",propaux.cssX=t&&t[1]?t[1]:"right",propiedades.style_positionbottom=e.plugin_chat_position_bottom||propiedades.style_positionbottom||0,propiedades.style_positionright=e.plugin_chat_position_right||propiedades.style_positionright||0,propiedades.style_positionY=propiedades.chat_widget?85:e.plugin_style_positionY||propiedades.style_positionbottom,propiedades.style_positionX=propiedades.chat_widget?55:e.plugin_style_positionX||propiedades.style_positionright,propiedades.style_buttonscolor=e.plugin_buttons_color||propiedades.style_header_background_color,propiedades.mensajeBienvenida=e.plugin_mensaje_bienvenida||propiedades.mensajeBienvenida||"Bienvenido {{name}} {{mail}}",propiedades.style_bottom_radius_left=e.plugin_bottom_radius_left||propiedades.style_bottom_radius_left||15,propiedades.style_bottom_radius_right=e.plugin_bottom_radius_right||propiedades.style_bottom_radius_right||15,propiedades.style_widget_icon_color=e.plugin_widget_icon_color||propiedades.style_widget_icon_color||"#ffffff",propiedades.style_widget_background_color=e.plugin_widget_background_color||propiedades.style_widget_background_color||propiedades.style_header_background_color,propiedades.widget_notificationMsg_visible=!!e.plugin_widget_notificationMsg_visible,propiedades.widget_notificationMsg_message=e.plugin_widget_notificationMsg_message||propiedades.widget_notificationMsg_message||"Conversemos",propiedades.widget_notificationMsg_seconds=e.plugin_widget_notificationMsg_seconds||propiedades.widget_notificationMsg_seconds||5e3,propiedades.widget_session_expiration_seconds=e.plugin_widget_session_expiration_seconds||propiedades.plugin_widget_session_expiration_seconds||3600,propiedades.widget_glowing=!!e.plugin_widget_glowing,propiedades.widget_glow_color=e.plugin_widget_glow_color||propiedades.widget_glow_color||"#ffffff",propiedades.widget_image_message=e.plugin_widget_image_message||propiedades.widget_image_message||urlBaseStatic+"/img/msg01.png",propiedades.widget_image_close=e.plugin_widget_image_close||propiedades.widget_image_close||urlBaseStatic+"/img/msgclose.png",propiedades.id_integracion=e.id_integracion||"demogatblac",propiedades.imagenChatHeigth=e.plugin_imagen_chat_heigth||propiedades.imagenChatHeigth||"120px",propiedades.imagenChatWidth=e.plugin_imagen_chat_width||propiedades.imagenChatWidth||"auto",propiedades.imagenChatMargin=e.plugin_imagen_chat_margin||propiedades.imagenChatMargin||"28%",propiedades.imagenChatMaxWidth=e.plugin_imagen_chat_maxwidth||propiedades.imagenChatMaxWidth||"70%",propiedades.sliderColor=e.plugin_slider_color||propiedades.sliderColor||"black",bolsaQA&&(propiedades.style_positionY=120)}function HTML(){var e,t,i;if(HTMLcargado&&(e=$("#gb-messages").html(),t=$("#name").val(),i=$("#email").val()),html="",html+="<style>",html+="#webchat #chatBox * {-webkit-box-sizing: initial;-moz-box-sizing: initial;box-sizing: initial;}",html+="#webchat #chatBox button, input {margin: initial;}",html+="#webchat #chatBox h3 {font-size: 15.3px;}",html+="#webchat #chatBox h4 {font-size: 13px;}",html+="#webchat #chatBox h3, #chatBox h4 {margin-top: 0px;margin-bottom: 0px;font-weight: bold;line-height: normal;}",html+="#webchat #chatBox img {vertical-align: initial;}",html+="#webchat #chatBox label {display: initial;font-weight: initial;}",html+="#webchat #chatBox ul {margin-top: 0px;margin-bottom: 0px;}",html+="#webchat #chatBox {font: 13px Helvetica, Arial;}",html+="#webchat #chatBox {box-sizing: border-box;margin: 0px;padding: 0px;position: fixed;"+propaux.cssY+": "+propiedades.style_positionY+"px;"+propaux.cssX+": "+propiedades.style_positionX+"px;max-width: 400px;width: 100%;}",html+="#webchat #chatBox {z-index: 999;}",html+="#webchat #chatContainer {width: 100%;padding: 0px 0px;text-align: center;background-color: "+propiedades.style_backgroundcolor+";margin: 0px 0px;height: 400px;width: 100%;display: none;background-image: url("+propiedades.style_background_image+");background-repeat: no-repeat;background-size: cover; box-shadow: 1px 1px 20px 0px grey;}",html+="#webchat #gbWidget { bottom: 0; position: fixed; margin: 1em; right: 0; z-index: 998;}",bolsaQA?(html+="#webchat #gbWidget a { display: block; width: 100px; height: 100px; border-radius: 50%; text-align: center; color:"+propiedades.style_widget_icon_color+"; box-shadow: 0 0 4px rgba(0, 0, 0, .14), 0 4px 8px rgba(0, 0, 0, .28); cursor: pointer; -webkit-transition: all .1s ease-out; transition: all .1s ease-out; position: relative; z-index: 998; overflow: hidden; background: #0CBDA3;}",html+="#webchat #widgetIcon { font-size: 48px; -webkit-transition: all .2s ease-out; -webkit-transition: all .2s ease-in-out; transition: all .2s ease-in-out; position: relative; top: 20%}"):(html+="#webchat #gbWidget a {line-height: 53px; display: block; width: 56px; height: 56px; border-radius: 50%; text-align: center; color:"+propiedades.style_widget_icon_color+"; box-shadow: 0 0 4px rgba(0, 0, 0, .14), 0 4px 8px rgba(0, 0, 0, .28); cursor: pointer; -webkit-transition: all .1s ease-out; transition: all .1s ease-out; position: relative; z-index: 998; overflow: hidden; background:"+propiedades.style_widget_background_color+";}",html+="#webchat #widgetIcon {-webkit-transition: all .2s ease-out; -webkit-transition: all .2s ease-in-out; transition: all .2s ease-in-out; height: 30px; width: auto; vertical-align: middle;}"),html+="#webchat #chatHeader {width: 100%;text-align: center;padding: 10px 0px;background-color: "+propiedades.style_title_background_color+";color: "+propiedades.style_title_font_color+";letter-spacing: 0.1em;font-weight: bold;-webkit-border-top-left-radius: "+propiedades.style_title_border_radius_left+"px;-webkit-border-top-right-radius: "+propiedades.style_title_border_radius_right+"px;-moz-border-radius-topleft: "+propiedades.style_title_border_radius_left+"px;-moz-border-radius-topright: "+propiedades.style_title_border_radius_right+"px;border-top-left-radius: "+propiedades.style_title_border_radius_left+"px;border-top-right-radius: "+propiedades.style_title_border_radius_right+"px;}",html+="#webchat #chatHeader i{float: left; margin-left: 17px; display: none}","window"==_parametrosInitChat.mode?html+="#webchat #chatConfig {background-color: rgba(0,0,0,0.8); width: 100%; z-index: 2; position: absolute; height: 400px; top: 51px; display: none;}":html+="#webchat #chatConfig {background-color: rgba(0,0,0,0.8); width: 100%; z-index: 2; position: absolute; height: 80%; top: 87px; display: none;}",html+="#webchat #chatMobileHeader {width: 100%; z-index: 2; position: relative; height: 55px; display:none;}",html+="#webchat #gb-asistente-div {background: "+propiedades.style_header_background_color+";position: relative;padding: 1px 1px;text-align: center; height: 55px; display:block;}",html+="#webchat #perfil-avatar {float: left}",html+="#webchat #avatarAsistente{border-radius: 100%;border-color: #388ADC;border-width: 0px;border-style: solid;position: absolute;z-index: 5;top: 4px;margin-left: 2%;}",html+="#webchat #perfil-asistente {margin-top: 4%;margin-left: 25%;}",html+="#webchat #perfil-asistente h3, #perfil-asistente h4 {color: #FFFFFF;text-align: left;letter-spacing: 0.06em;}",html+="#webchat #gb-menu-lateral {text-align: right; position: relative; top: -44px}",html+="#webchat #gb-menu-lateral i {color: white;font-size: 20px;font-style: normal;}",html+="#webchat #gb-menu-lateral ul {list-style: none;}",html+="#webchat #gb-menu-lateral img { height: 25px; margin: 0px 5px 0px 0px}",html+="#webchat #welcome {padding: 1px 1px;text-align: center;}",html+="#webchat #gb-name-div {width: 90%;margin: auto;padding: 1px 1px;text-align: center;}",html+="#webchat #gb-name-div h4 {margin-top: 5%;margin-bottom: 8%;word-spacing: 0.3em; font-size:15px;} ",html+="#webchat .input-group-formulario {position: relative;margin-bottom: 10%;}",html+='#webchat .input-group-formulario input[type="text"], .input-group-formulario input[type="email"] {color: #323030;width: 60%;outline: none;padding: 3%;background: none;border: 1px solid #A69F9F;border-radius: 8px;}',html+="#webchat #name {background: #FFFFFF;}",html+="#webchat #email {background: #FFFFFF;}",html+="#webchat .input-group-formulario label {color: rgb(133, 127, 127);}",html+="#webchat .input-group-formulario label.label-formulario {-webkit-transition: all 0.3s ease;-o-transition: all 0.3s ease;transition: all 0.3s ease;position: absolute;top: -45%; left: 18%;}",html+="#webchat #boton-ingresar {background: "+propiedades.style_buttonscolor+";border-radius: 10px;-webkit-box-shadow: 0 3px 2px 0 rgba(0,0,0,0.2);box-shadow: 0 3px 2px 0 rgba(0,0,0,0.2);color: #FFFFFF;cursor: pointer;display: inline-block;padding: 3% 5%;letter-spacing: 0.1em;margin-top: 5%;font-size: 1.1em;-webkit-transition: all 0.3s ease;-o-transition: all 0.3s ease;transition: all 0.3s ease;border:none;}",html+="#webchat #boton-ingresar:hover {filter: brightness(85%);}",html+="#webchat #gb-advertencia {height: 62px; margin-top: 10px; list-style: none; text-align: center;}",html+="#webchat #gb-messages {list-style-type: none;margin: 0px 0px 120px 0px;padding: 20px 0px 0px 0px;text-align: left;overflow: auto;max-height: 274px;}",html+="#webchat #gb-messages li {padding: 3% 4%;display: inline-block;word-break:break-word;width: 70%;border-radius: 8px;margin: 2% 2% 2% 5%;}",html+="#webchat #formMessage {list-style: none;margin: 0px 0px 120px 0px; padding: 20px 0px 20px 0px; text-align: center; overflow: auto; max-height: 250px; display: none; background: #e5e5e5; position: absolute; z-index: 4; width: 90%; left: 5%; top: 22%}",html+="#webchat #formMessage p {margin: 10px;}",html+="#webchat #formMessage li {margin-bottom: 10px; display: grid; grid-template-rows: 100%; grid-template-columns: 40% 60%;}",html+="#webchat #formMessage label {font-weight: bold; margin-left: 10%; text-align: left; padding-top: 5px;}",html+="#webchat #formMessage input {width: 70%; padding: 5px 10px; font-size: 12px; line-height: 1.5; border-radius: 3px; border: 1px solid #cccccc;}",html+="#webchat #formMessage button {background: "+propiedades.style_buttonscolor+"; border-radius: 4px; padding: 1% 1%; color: #FFFFFF; height: 20px; width: 30%; margin: 5px 5px 0px 5px}",html+="#webchat .msg-bot {background-color: #eee;float: left;color: #1a1a1a;}",html+="#webchat .msg-client {background-color:"+propiedades.style_buttonscolor+";float: right;color: #FFFFFF;}",html+="#webchat #msgStatus {position: absolute;bottom: 42px;left: 3px;display: none;}",html+="#webchat #imgTyping {height: 50px;}",html+="#webchat #gb-input-div {grid-template-columns: 5fr 1fr;padding: 3px;position: absolute;bottom: 2px;width: 99%;}",html+="#webchat #message {background: #F7F5F5;color: rgb(90, 88, 88);background: #F7F5F5;color: rgb(90, 88, 88);border-radius: 7px;padding: 1% 1%;margin: 0;width: 75%; height:28px; outline:none;}",html+="#webchat #voiceIcon {color: "+propiedades.style_buttonscolor+"; width: 10%; text-align: center; vertical-align: middle;}",html+="#webchat .voiceAnswer {color: "+propiedades.style_buttonscolor+";}",html+="#webchat #sendMessageBtn {background:"+propiedades.style_buttonscolor+";border-radius: 7px;padding: 1% 1%; color: #FFFFFF;cursor: pointer;margin-top: 0; width: 15%; height:28px;font-size: 14px;border:none;}",html+="#webchat #gb-btnOptions {background: "+propiedades.style_buttonscolor+";color: white;width: 70% !important;border-radius: 10px 10px;min-height:20px; margin: 2px 0px !important; padding: 0px 10px;}",html+="#webchat #gb-messages #tittle {text-align: center;}",html+="#webchat .sliderPrev, .sliderNext {cursor: pointer; position: absolute; width: auto; padding: 10px; color:"+propiedades.sliderColor+"; font-weight: bold; font-size: 18px; transition: 0.6s ease; border-radius: 0 3px 3px 0;}",html+="#webchat .sliderNext {right: -1.5em; border-radius: 3px 0 0 3px;}",html+="#webchat .sliderPrev {left: -15.7em;}",html+="#webchat .sliderPrev:hover, .sliderNext:hover {background-color: rgba(0,0,0,0.5);}",html+="#webchat #chatConfig span{color: white; font-size: 16px;}",html+="#webchat #chatConfig a{margin-left: 20px;}",html+="#webchat #chatConfig img{height: 30px; margin-bottom: 5px; vertical-align: middle; width: auto;}",html+="#webchat .time {float: right; margin: 5px 0px 0px 0px; font-size: 11px;}",html+="#webchat .feedback {float: left; margin: 5px 0px 0px 0px; font-size: 9px; font-style: italic;}",html+="#webchat #notificationMsg {background-color: #00000029; color: white; padding: 5px 15px; border-radius: 20px; border: 1px solid #ffffff33; position: fixed; bottom: 85px; right: 10px;}",html+="#webchat #goodAnswer, #badAnswer{width: 10px; height: auto; cursor: pointer;}",propiedades.chat_widget&&(html+="#webchat #chatContainer {-webkit-border-top-left-radius: "+propiedades.style_title_border_radius_left+"px;-webkit-border-top-right-radius: "+propiedades.style_title_border_radius_right+"px;-moz-border-radius-topleft: "+propiedades.style_title_border_radius_left+"px;-moz-border-radius-topright: "+propiedades.style_title_border_radius_right+"px;border-top-left-radius: "+propiedades.style_title_border_radius_left+"px;border-top-right-radius: "+propiedades.style_title_border_radius_right+"px;}",html+="#webchat #chatContainer {-webkit-border-bottom-left-radius: "+propiedades.style_bottom_radius_left+"px;-webkit-border-bottom-right-radius: "+propiedades.style_bottom_radius_right+"px;-moz-border-radius-bottomleft: "+propiedades.style_bottom_radius_left+"px;-moz-border-radius-bottomright: "+propiedades.style_bottom_radius_right+"px;border-bottom-left-radius: "+propiedades.style_bottom_radius_left+"px;border-bottom-right-radius: "+propiedades.style_bottom_radius_right+"px;}",html+="#webchat #gb-asistente-div {-webkit-border-top-left-radius: "+propiedades.style_title_border_radius_left+"px;-webkit-border-top-right-radius: "+propiedades.style_title_border_radius_right+"px;-moz-border-radius-topleft: "+propiedades.style_title_border_radius_left+"px;-moz-border-radius-topright: "+propiedades.style_title_border_radius_right+"px;border-top-left-radius: "+propiedades.style_title_border_radius_left+"px;border-top-right-radius: "+propiedades.style_title_border_radius_right+"px;}",html+="#webchat #chatConfig {top: 52px; height: 87%; -webkit-border-bottom-left-radius: "+propiedades.style_bottom_radius_left+"px;-webkit-border-bottom-right-radius: "+propiedades.style_bottom_radius_right+"px;-moz-border-radius-bottomleft: "+propiedades.style_bottom_radius_left+"px;-moz-border-radius-bottomright: "+propiedades.style_bottom_radius_right+"px;border-bottom-left-radius: "+propiedades.style_bottom_radius_left+"px;border-bottom-right-radius: "+propiedades.style_bottom_radius_right+"px;}"),propiedades.widget_glowing&&(html+="#webchat #gbWidget a {-webkit-animation: glow 2s ease-in-out infinite; -moz-animation: glow 2s ease-in-out infinite; animation: glow 2s ease-in-out infinite;}",html+="#webchat #gbWidget a:hover {-webkit-animation: none; -moz-animation: none; animation: none;}",html+="@-webkit-keyframes glow {",html+="0% { box-shadow: 0px 0px 0 0px transparent; }",html+="59% { box-shadow: 0px 0px 0 0px transparent; }",html+="60% { box-shadow: 0px 0px 0 0px "+propiedades.widget_glow_color+"; }",html+="100% { box-shadow: 0px 0px 0 10px transparent; }",html+="}"),isIE||"window"==_parametrosInitChat.mode||(html+="@media only screen and (min-device-width : 0px) and (max-device-width : 767px){",html+="#webchat #chatBox {bottom:0px;right:0px;} #chatContainer {height:100vh;width: 100vw;} #gb-messages{min-height:auto;max-height:75vh;}",html+="#webchat #gb-asistente-div {-webkit-border-top-left-radius: 0px;-webkit-border-top-right-radius: 0px;-moz-border-radius-topleft: 0px;-moz-border-radius-topright: 0px;border-top-left-radius: 0px;border-top-right-radius: 0px; display:block;}",html+="#webchat #chatContainer {-webkit-border-bottom-left-radius: 0px;-webkit-border-bottom-right-radius: 0px;-moz-border-radius-bottomleft: 0px;-moz-border-radius-bottomright: 0px;border-bottom-left-radius: 0px;border-bottom-right-radius: 0px;}",html+="#webchat #chatConfig {height:100vh;}",html+="#webchat #chatMobileHeader{background-color:"+propiedades.style_title_background_color+";display:block;}",html+="}"),propiedades.widget_notificationMsg_visible&&(html+="#gbWidget a {width: 150px; height: 60px; border-radius: 10px; background: #ffffff}"),html+="#survey-box{ color: #265D7B;\tfont-family: Helvetica;\tfont-size: 11px;}",html+=".survey-text-box{\twidth: 230px;\tmargin: auto; }",html+=".survey-text-box textarea{\tdisplay: block; \tpadding: 3%;\twidth: 100%;\tborder: solid 1px grey;\tborder-radius: 5px;\tresize: none;\theight: 50px;}",html+="#survey-header h1{\tfont-size: 16px;\ttext-align: center;}",html+="#survey-hr { height: 1px;    border: 0;    background-color: #d8d9da;    width: 100%;    margin: 10px 0 10px 0;    outline: none;}",html+="#survey-footer h4{text-align: center;\tfont-size: 12px}",html+=".survey-text-box h1{font-size: 12px;text-align: center;\twidth: 100%;}",html+=".ec-stars-wrapper {display: flex;justify-content: center;align-items: center;}",html+=".ec-stars-wrapper a {text-decoration: none;\tdisplay: inline-block;\tfont-size: 2rem;color: #888;}",html+=".ec-stars-wrapper:hover a {\tcolor: "+propiedades.style_header_background_color+";}",html+=".ec-stars-wrapper > a:hover ~ a {\tcolor: #888;}",html+="#survey-send-button {  background: "+propiedades.style_header_background_color+";border-radius: 10px; -webkit-box-shadow: 0 3px 2px 0 rgba(0,0,0,0.2); box-shadow: 0 3px 2px 0 rgba(0,0,0,0.2); color: #FFFFFF; cursor: pointer; display: inline-block; padding: 3% 5%; letter-spacing: 0.1em; margin-top: 5%; font-size: 1.1em; -webkit-transition: all 0.3s ease; -o-transition: all 0.3s ease; transition: all 0.3s ease;border: none; float: right;}",html+="#survey-cancel-button {  background: #eef0f4;border-radius: 10px; -webkit-box-shadow: 0 3px 2px 0 rgba(0,0,0,0.2); box-shadow: 0 3px 2px 0 rgba(0,0,0,0.2); color: "+propiedades.style_header_background_color+"; cursor: pointer; display: inline-block; padding: 3% 5%; letter-spacing: 0.1em; margin-top: 5%; font-size: 1.1em; -webkit-transition: all 0.3s ease; -o-transition: all 0.3s ease; transition: all 0.3s ease;border: none; float: left;}",html+="</style>",html+='<div id="parentSimulator" style="display: none; height: 400px;">',html+='<div id="simulator" style="width: 946; height: 390px;">',html+="<div>",html+='<a href="#" onclick="hideSimulator()" style="float: right; margin-right: 26%; top: 20px; position: relative; color: #dc5a5a; font-size: 18px; font-weight: bold;">[x]</a>',html+="</div>",html+="</div>",html+="</div>",propiedades.chat_widget&&(html+='<div id="gbWidget">',html+='<a onclick="toggleChat()">',propiedades.widget_notificationMsg_visible?html+='<img id="widgetIcon" src="'+urlBaseStatic+'/img/icono.svg"></img>':html+='<img id="widgetIcon" src="'+propiedades.widget_image_message+'"></img>',html+="</a>",html+="</div>"),html+='<div id="chatBox">',propiedades.chat_widget||"window"==_parametrosInitChat.mode||(html+='<div id="chatHeader" onclick="toggleChat()" style="cursor: pointer;">'+propiedades.titulo_ventana+"<i>×</i></div>"),html+='<div id="chatContainer">',html+='<div id="chatMobileHeader"></div>',html+='<div id="chatConfig">',html+='<div style="border-bottom: 1px solid #ffffff0d; height: 50px; line-height: 50px; vertical-align: middle;">',html+="<span>Activar/Desactivar Sonido</span>",propiedades.enabled_audio?html+='<a href="#" onclick="toggleAudio();"><img id="icon_volume" src="'+urlBaseStatic+'/img/con_volumen.png"></a>':html+='<a href="#" onclick="toggleAudio();"><img id="icon_volume" src="'+urlBaseStatic+'/img/sin_volumen.png"></a>',html+="</div>",propiedades.enabled_pdf_save&&(html+='<div style="border-bottom: 1px solid #ffffff0d; height: 50px; line-height: 50px; vertical-align: middle;">',html+="<span>Descargar conversación</span>",html+='<a href="#" onclick="savePDF();"><img src="'+urlBaseStatic+'/img/descargar.png"></a>',html+="</div>"),html+="</div>",html+='<div id="gb-asistente-div">',"window"==_parametrosInitChat.mode?html+='<div id="perfil-avatar">':html+='<div id="perfil-avatar" onclick="toggleChat();">',html+='<img id="avatarAsistente" src="'+propiedades.asistenteAvatar+'" alt="Ejecutivo" style="height: '+propiedades.asistenteAvatarHeight+"px;width: "+propiedades.asistenteAvatarWidth+'px">',html+="</div> ","window"==_parametrosInitChat.mode?html+='<div id="perfil-asistente">':html+='<div id="perfil-asistente" onclick="toggleChat();">',html+="<h3>"+propiedades.asistenteName+"</h3>",html+="<h4>"+propiedades.asistenteCargo+"</h4>",html+="</div>",html+="</div>",html+='<form onsubmit="return enviarMensaje();">',html+='<div id="layer"></div>',html+='<div id="gb-name-div">',html+="<h4> Bienvenido! </h4>",propiedades.enabled_input_name&&(html+="<div>",html+='<div class="input-group-formulario">',html+='<input id="name" name="name" type="text" autocomplete="off" maxlength="20" placeholder="Ingrese aquí su nombre" autofocus />',html+='<label class="label-formulario" for="name">Nombre: &nbsp;</label>',html+="</div>",html+="</div>"),propiedades.enabled_input_email&&(html+="<div>",html+='<div class="input-group-formulario">',html+='<input id="email" name="email" type="email" autocomplete="off" placeholder="Ingrese aquí su correo" />',html+='<label class="label-formulario" for="email">Correo: &nbsp;</label>',html+="</div>",html+="</div>"),html+='<div id="contenedor-boton-ingresar">',html+='<button id="boton-ingresar" onclick="ingresarChat();">'+propiedades.texto_ingresar+"</button>",html+="</div>",html+="</div>",html+='<div id="gb-advertencia"></div>',html+='<ul id="gb-messages">',html+="</ul>",html+='<ul id="formMessage"></ul>',html+='<ul id="configMenu"></ul>',html+='<div id="msgStatus">',html+='<img id="imgTyping" src="'+propiedades.plugin_loading_message+'">',html+="</div>",html+='<div id="gb-input-div">',html+='<input id="message" name="message" autocomplete="off" placeholder="Escriba su mensaje aquí" style="margin-right:10px;background-color:white;border:1px solid #f8f8f8;" />',html+='<button id="sendMessageBtn">'+propiedades.texto_enviar+"</button>",html+="</div>",html+="</form>",html+="</div>",html+="</div>",$("#webchat").html(html),HTMLcargado=!0,(propiedades.chat_abierto||"window"==_parametrosInitChat.mode)&&toggleChat(),$("#gb-input-div").hide(),$("#gb-messages").hide(),propiedades.widget_notificationMsg_visible&&$("#gbWidget a").css({width:"150px",height:"60px","border-radius":"10px",background:"#ffffff"}),console.log("[Webchat cargado]"),e)$("#email").val(i||""),$("#name").val(t||""),$("#gb-messages").show(),$("#gb-messages").html(e),$("#gb-name-div").hide(),$("#gb-input-div").show(),showChat(),$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},500);else{if(checkCookie(),fromId=getCookie("gb-wbchtbt-uid"),_parametrosInitChat.ref&&_parametrosInitChat.ref.from_id&&(fromId=_parametrosInitChat.ref.from_id),_parametrosInitChat.ref&&_parametrosInitChat.ref.from_complement&&(fromComplement=_parametrosInitChat.ref.from_complement),_parametrosInitChat.ref&&_parametrosInitChat.ref.email&&$("#email").val(_parametrosInitChat.ref.email||""),_parametrosInitChat.ref&&(_parametrosInitChat.ref.first_name||_parametrosInitChat.ref.last_name)){var a=(_parametrosInitChat.ref.first_name||"")+" "+(_parametrosInitChat.ref.last_name||"");$("#name").val(a.trim())}websocket.send(JSON.stringify({type:"init",from_id:fromId,channel:_parametrosInitChat.channel}))}propiedades.enabled_input_email&&""==$("#email").val()||propiedades.enabled_input_name&&""==$("#name").val()||($("#boton-ingresar").click(),(_parametrosInitChat.ref&&_parametrosInitChat.ref.from_id||"window"==_parametrosInitChat.mode)&&showChat()),"window"==_parametrosInitChat.mode&&($("#gbWidget").css("display","none"),$("#chatBox").css("bottom","0"),$("#chatBox").css("right","0"),$("#gb-asistente-div").css("-webkit-border-top-left-radius","0px"),$("#gb-asistente-div").css("-webkit-border-top-right-radius","0px"),$("#gb-asistente-div").css("border-top-left-radius","0px"),$("#gb-asistente-div").css("border-top-right-radius","0px"),$("#chatConfig").css("-webkit-border-bottom-left-radius","0px"),$("#chatConfig").css("-webkit-border-bottom-right-radius","0px"),$("#chatConfig").css("border-bottom-left-radius","0px"),$("#chatConfig").css("border-bottom-right-radius","0px")),inicializado=!0}function libsHTML(){var e="";!("function"==typeof $().modal)&&propiedades.plugin_inyectar_bootstrap&&(console.log("loading bootstrap by chat"),e+='<link rel="stylesheet" href="'+urlBaseStatic+'/lib/css/bootstrap.css">'),window.moment||(console.log("loading moment by chat"),e+='<script src="'+urlBaseStatic+'/lib/js/moment.min.js"><\/script>'),$("#webchat").html(e)}var ingresarChat=function(){if(propiedades.required_input_email){if(!propiedades.enabled_input_email)return $("#gb-advertencia").html(""),$("#gb-advertencia").html('<span style="color: red;"><b>TIENE QUE HABILITAR INPUT DE CORREO</b></span>'),!1;if(""==$("#email").val())return $("#gb-advertencia").html(""),$("#gb-advertencia").html('<span style="color: red;"><b>INDIQUE SU EMAIL</b></span>'),!1}if(propiedades.required_input_name){if(!propiedades.enabled_input_name)return $("#gb-advertencia").html(""),$("#gb-advertencia").html('<span style="color: red;"><b>TIENE QUE HABILITAR INPUT DE NOMBRE</b></span>'),!1;if(""==$("#name").val())return $("#gb-advertencia").html(""),$("#gb-advertencia").html('<span style="color: red;"><b>INDIQUE SU NOMBRE</b></span>'),!1}$("#gb-name-div").hide(),$("#contenedor-boton-ingresar").hide(),$("#gb-input-div").show(),$("#gb-messages").show()},toggleChat=function(){var e=$("#chatContainer").css("display"),t=$("#notificationMsg").css("display");"none"===e?($("#widgetIcon").prop("src",""),$("#chatContainer").css("display","block"),$("#widgetIcon").prop("src",propiedades.widget_image_close),propiedades.widget_notificationMsg_visible&&$("#gbWidget a").css({width:"56px",height:"56px","border-radius":"50%",background:propiedades.style_widget_background_color})):($("#widgetIcon").prop("src",""),$("#chatContainer").css("display","none"),propiedades.widget_notificationMsg_visible?($("#widgetIcon").prop("src",urlBaseStatic+"/img/icono.svg"),$("#gbWidget a").css({width:"150px",height:"60px","border-radius":"10px",background:"#ffffff"})):$("#widgetIcon").prop("src",propiedades.widget_image_message)),"block"===t&&$("#notificationMsg").css("display","none")},openChat=function(){$("#chatContainer").css("display","block"),$("#widgetIcon").prop("src",propiedades.widget_image_close),$("#notificationMsg").css("display","none")},initHtmlModal=function(){var e='<div id="modalgatblacsurvey" tabindex="-1" role="dialog"   aria-labelledby="myModalLabel" aria-hidden="true" class="modal fade">';e+='  <div class="modal-dialog">',e+='    <div class="modal-content">',e+='      <div class="modal-header" hidden>Mapa</div>',e+='      <div class="modal-body"></div>',e+='      <div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button></div>',e+="    </div>",e+="  </div>",e+="</div>",0==$.find("#modalgatblacsurvey").length&&($(e).appendTo("body"),$("#modalgatblacsurvey").on("hidden.bs.modal",function(){$("#modalgatblacsurvey").find(".modal-body").html("")}))},sendOption=function(e){$("#message").val(e),$("#sendMessageBtn").click()},openYoutubeVideo=function(e){initHtmlModal(),e.startsWith("<iframe")?($(modalgatblac).find(".modal-body").html(e),$("#modalgatblac").modal("show")):e.includes("/embed/")?($(modalgatblac).find(".modal-body").html('<iframe width="570px" height="380px"src="'+e+'"></iframe>'),$("#modalgatblac").modal("show")):openURL(e)},openGenericConntent=function(e){initHtmlModal(),$(modalgatblac).find(".modal-body").html(e),$("#modalgatblac").modal("show")},buildSurvey=function(e){let t="";return"5c09761e09e8cc71486a22d8"===e.channel_id&&(t+='<div id="survey-box" style="width: 300px;">',t+='<section id="survey-header">',t+="<h1>{{title}}</h1>",t+="</section>",t+='<div class="ec-stars-wrapper">',t+='<a id="survey1" href="#" onclick="getStarValue(this)" data-value="1" title="Votar con 1 estrellas">&#9733;</a>',t+='<a id="survey2" href="#" onclick="getStarValue(this)" data-value="2" title="Votar con 2 estrellas">&#9733;</a>',t+='<a id="survey3" href="#" onclick="getStarValue(this)" data-value="3" title="Votar con 3 estrellas">&#9733;</a>',t+='<a id="survey4" href="#" onclick="getStarValue(this)" data-value="4" title="Votar con 4 estrellas">&#9733;</a>',t+='<a id="survey5" href="#" onclick="getStarValue(this)" data-value="5" title="Votar con 5 estrellas">&#9733;</a>',t+="</div>",t+='<hr id="survey-hr">',t+='<section class="survey-text-box">',t+="<h1>{{body}}</h1>",t+='<form class="formulario" id="survey-text-box">',t+='<textarea id="survey-comment" placeholder="Comentario"></textarea>',t+="</form>",t+="</section>",t+='<hr id="survey-hr">',t+='<section id="survey-footer">',t+="<h4>{{fotter}}</h4>",t+="</section>",t+="<br>",t+="<div>",t+='<button   id="survey-cancel-button"  onclick="cancelSurvey();">Cancelar</button>',t+='<button   id="survey-send-button"  onclick="sendSurvey();">Enviar</button>',t+="<br>",t+="</div>",t+="<br>",t+="</div>"),"5c70124f2e40af005f6d0bf8"===e.channel_id&&(t+='<div id="survey-box" style="float: left;">',t+='<section id="survey-header">',t+='<h1 style="font-size: 12px;">{{title}}</h1>',t+="</section>",t+='<div class="ec-stars-wrapper">',t+='<a style="font-size: 1.5rem;" id="survey1" href="#" onclick="getStarValue(this)" data-value="1" title="Votar con 1 estrellas">&#9733;</a>',t+='<a style="font-size: 1.5rem;" id="survey2" href="#" onclick="getStarValue(this)" data-value="2" title="Votar con 2 estrellas">&#9733;</a>',t+='<a style="font-size: 1.5rem;" id="survey3" href="#" onclick="getStarValue(this)" data-value="3" title="Votar con 3 estrellas">&#9733;</a>',t+='<a style="font-size: 1.5rem;" id="survey4" href="#" onclick="getStarValue(this)" data-value="4" title="Votar con 4 estrellas">&#9733;</a>',t+='<a style="font-size: 1.5rem;" id="survey5" href="#" onclick="getStarValue(this)" data-value="5" title="Votar con 5 estrellas">&#9733;</a>',t+="</div>",t+='<hr id="survey-hr">',t+='<section class="survey-text-box">',t+='<h1 style="font-size: 10px;">{{body}}</h1>',t+='<form class="formulario" id="survey-text-box">',t+='<textarea style="font-size: 12px; height: 30px;" id="survey-comment" placeholder="Comentario"></textarea>',t+="</form>",t+="</section>",t+='<hr id="survey-hr">',t+='<section id="survey-footer">',t+='<h4 style="font-size: 11px;">{{fotter}}</h4>',t+="</section>",t+="<br>",t+="<div>",t+='<button id="survey-cancel-button"  onclick="cancelSurvey();">Cancelar</button>',t+='<button id="survey-send-button"  onclick="sendSurvey();">Enviar</button>',t+="</div>",t+="<br>",t+="</div>"),t=t.replace("{{title}}",e.title).replace("{{body}}",e.body).replace("{{fotter}}",e.fotter)},initSurveyModal=function(){var e='<div id="modalgatblac" style tabindex="-1" role="dialog"  aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false" class="modal fade">';e+='  <div class="modal-dialog">',e+='    <div class="modal-content" style="float: left;">',e+='      <div class="modal-header" hidden>Mapa</div>',e+='      <div class="modal-body"></div>',e+="      <br>",e+="    </div>",e+="  </div>",e+="</div>",0==$.find("#modalgatblac").length&&($(e).appendTo("body"),$("#modalgatblac").on("hidden.bs.modal",function(){$("#modalgatblac").find(".modal-body").html("")}))},openSurvey=function(e){initSurveyModal(),$(modalgatblac).find(".modal-body").html(e),$("#modalgatblac").modal("show")},getStarValue=function(e){surveyStars=e.dataset.value,drawStars(surveyStars)},drawStars=function(e){1==e&&(document.getElementById("survey1").style.color=propiedades.style_header_background_color,document.getElementById("survey2").style.removeProperty("color"),document.getElementById("survey3").style.removeProperty("color"),document.getElementById("survey4").style.removeProperty("color"),document.getElementById("survey5").style.removeProperty("color")),2==e&&(document.getElementById("survey1").style.color=propiedades.style_header_background_color,document.getElementById("survey2").style.color=propiedades.style_header_background_color,document.getElementById("survey3").style.removeProperty("color"),document.getElementById("survey4").style.removeProperty("color"),document.getElementById("survey5").style.removeProperty("color")),3==e&&(document.getElementById("survey1").style.color=propiedades.style_header_background_color,document.getElementById("survey2").style.color=propiedades.style_header_background_color,document.getElementById("survey3").style.color=propiedades.style_header_background_color,document.getElementById("survey4").style.removeProperty("color"),document.getElementById("survey5").style.removeProperty("color")),4==e&&(document.getElementById("survey1").style.color=propiedades.style_header_background_color,document.getElementById("survey2").style.color=propiedades.style_header_background_color,document.getElementById("survey3").style.color=propiedades.style_header_background_color,document.getElementById("survey4").style.color=propiedades.style_header_background_color,document.getElementById("survey5").style.removeProperty("color")),5==e&&(document.getElementById("survey1").style.color=propiedades.style_header_background_color,document.getElementById("survey2").style.color=propiedades.style_header_background_color,document.getElementById("survey3").style.color=propiedades.style_header_background_color,document.getElementById("survey4").style.color=propiedades.style_header_background_color,document.getElementById("survey5").style.color=propiedades.style_header_background_color)},sendSurvey=function(){let e=surveyStars;if(void 0===e)return;let t='{"type":"survey-response","stars":"'+e+'","comment":"'+$("#survey-comment").val()+'"}';websocket.send(JSON.stringify({from_id:fromId,name:name,email:email,message:t,from_complement:fromComplement,modo:propiedades.tipo_chat})),document.getElementById("message").disabled=!1,$("#message").attr("placeholder","Escriba su mensaje Aquí"),document.getElementById("sendMessageBtn").disabled=!1,$("#survey_li").length>0?$("#survey_li").remove():$("#modalgatblac").modal("hide")},cancelSurvey=function(){websocket.send(JSON.stringify({from_id:fromId,name:name,email:email,message:'{"type":"end_without_survey","text":"cancelar encuesta"}',from_complement:fromComplement,modo:propiedades.tipo_chat})),document.getElementById("message").disabled=!1,$("#message").attr("placeholder","Escriba su mensaje Aquí"),document.getElementById("sendMessageBtn").disabled=!1,document.getElementById("survey-send-button").disabled=!0,document.getElementById("survey-cancel-button").disabled=!0,$("#survey_li").length>0?$("#survey_li").remove():$("#modalgatblac").modal("hide")};function openURL(e){if(e){var t=window.open(e,"_blank");t&&t.focus()}}var showGeoLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(showPosition):x.innerHTML="Geolocation is not supported by this browser."};function showPosition(e){var t=e.coords.latitude+","+e.coords.longitude,i="https://maps.googleapis.com/maps/api/staticmap?center="+t+"&zoom=14&size=300x200&sensor=false&markers=color:red|"+t+"&key=AIzaSyDe_nhQVmwSwxz78nIK0CDXYzdsiTlfKeM";console.log(i),document.getElementById("map").innerHTML="<img src='"+i+"'>"}var map,mapDate=new Date,mapTime=mapDate.toTimeString().substr(0,5),LatLng=null,query=null;function initMap(e){query=e,initHtmlModal(),$(modalgatblac).find(".modal-body").html('<div id="map" style="width:570px;height:380px;display:block"></div>'),$("#modalgatblac").modal("show"),navigator.geolocation?navigator.geolocation.getCurrentPosition(places,error,{maximumAge:6e4,timeout:5e3,enableHighAccuracy:!0}):x.innerHTML="Geolocation is not supported by this browser."}function error(e){console.warn("ERROR("+e.code+"): "+e.message)}function places(e){var t=e.coords;LatLng=new google.maps.LatLng(t.latitude,t.longitude);map=new google.maps.Map(document.getElementById("map"),{center:LatLng,zoom:15,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]}]});new google.maps.Marker({position:LatLng,map:map});var i={location:LatLng,radius:"50",query:query};infowindow=new google.maps.InfoWindow,new google.maps.places.PlacesService(map).textSearch(i,callback)}function callback(e,t){if(t===google.maps.places.PlacesServiceStatus.OK)for(var i=0;i<e.length;i++)createMarker(e[i])}function createMarker(e,t){var i=e.geometry.location,a=Math.floor(google.maps.geometry.spherical.computeDistanceBetween(LatLng,i)),s=(t=t||"",new google.maps.Marker({map:map,position:e.geometry.location,icon:t}));google.maps.event.addListener(s,"click",function(){$("#modalgatblac").modal("hide"),infowindow.setContent("<b>"+e.name+"</b>"),infowindow.open(map,this),$("#gb-messages").append($('<li class="msg-bot">').html("("+mapTime+") <strong> "+propiedades.asistenteName+"</strong>: Ha seleccionado : "+e.name+"</br> La dirrección es: "+e.formatted_address+".</br> Se encuentra a: "+a+" metros de distancia.")),$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},500)})}var textFromHtmlString=function(e){const t=document.createElement("div");return t.innerHTML=e,t.innerText},enviarMensaje=function(){new Date;return $("#message").val(textFromHtmlString($("#message").val())),name=""===$("#name").val()||void 0===$("#name").val()?"Usuario":$("#name").val(),email=$("#email").val(),"window"==_parametrosInitChat.mode&&(""===_parametrosInitChat.ref.first_name||(name=_parametrosInitChat.ref.first_name)),inicializado||"window"==_parametrosInitChat.mode||$("#name").val()&&""!=$("#name").val().trim()?(sesionNavegador&&!inicializado&&(name=sesionNavegador.name,email=sesionNavegador.email,inicializado=!0),inicializado?$("#message").val()&&(websocket.readyState===websocket.CLOSED||(""==name&&(name="Usuario"),$("#msgStatus").show(),websocket.send(JSON.stringify({from_id:fromId,name:name,email:email,message:$("#message").val(),from_complement:fromComplement,modo:propiedades.tipo_chat})))):(name=$("#name").val()?$("#name").val():"Usuario",email=$("#email").val()?$("#email").val():"",$("#gb-messages").css("display",""),$("#gb-name-div").hide(),$("#gb-input-div").show(),$("#gb-advertencia").remove(),sesionNavegador={name:name,email:email},"undefined"!=typeof Cookies&&Cookies.set("sesionNavegador",JSON.stringify(sesionNavegador)),inicializado=!0),$("#message").focus(),$("#message").val(""),!1):($("#gb-advertencia").html(""),$("#gb-advertencia").html('<span style="color: red;"><b>INDIQUE SU NOMBRE</b></span>'),!1)},showChat=function(){console.log("showChat"),$("#chatContainer").css("display","block"),currentTMLdisplay=!0};$(document).on("click","#chatBox .action-send-message",function(){$("#message").val($(this).text()),enviarMensaje()});var re_GB_INIT_CHAT=function(){$("#liAlertaConexion").remove(),$("#gb-advertencia").remove(),$("#gb-messages").animate({scrollTop:$("#gb-messages").prop("scrollHeight")},500),_parametrosInitChat&&GB_INIT_CHAT(_parametrosInitChat)},urlify=function(e){return e.replace(/(https?:\/\/[^\s]+)/g,function(e){return'<a href="'+e+'" class="action-external-url" target="_blank"> Clic Aquí </a>'})},toggleAudio=function(){propiedades.enabled_audio?(propiedades.enabled_audio=!1,$("#icon_volume").prop("src","/img/sin_volumen.png")):(propiedades.enabled_audio=!0,$("#icon_volume").prop("src",urlBaseStatic+"/img/con_volumen.png"))},sendForm=function(e){if(msg=$(e).data("message"),msg.tittle.includes("Simulador"))$("#gb-messages").css("display","block"),$("#formMessage").css("display","none"),$("#formMessage").html(""),$("#message").prop("disabled",!1),$("#sendMessageBtn").prop("disabled",!1),$("#parentSimulator").css("display","block"),$("#sendMessageBtn").click(),toggleChat();else{for(i in mensaje="[FORM="+msg.tittle+"]",msg.fields)mensaje=mensaje+msg.fields[i]+"="+($("#"+i+msg.fields[i]).val()+"").replace(";",",")+"; ";$("#gb-messages").css("display","block"),$("#formMessage").css("display","none"),$("#formMessage").html(""),$("#message").prop("disabled",!1),$("#sendMessageBtn").prop("disabled",!1),$("#message").val(mensaje),$("#sendMessageBtn").click()}},cancelForm=function(){$("#gb-messages").css("display","block"),$("#formMessage").css("display","none"),$("#formMessage").html(""),$("#message").prop("disabled",!1),$("#sendMessageBtn").prop("disabled",!1)},showSlides=function(e,t){var i,a=document.getElementById(t).getElementsByClassName("mySlides"),s=-1;for(i=0;i<a.length;i++)"block"==a[i].style.display&&(s=i),a[i].style.display="none";a[s<0||0==e?0:Math.abs((s+e)%a.length)].style.display="block"},removerEmojis=function(e){if("string"==typeof e||e instanceof String){var t=e.replace(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,"");return t=t.replace(/([\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2694-\u2697]|\uD83E[\uDD10-\uDD5D])/g,"")}return""},imported=document.createElement("script");imported.src=urlBaseStatic+"/lib/js/jspdf.min.js",document.head.appendChild(imported);var savePDF=function(){var e={title:"Conversación Asistente Virtual",date:(new Date).toLocaleDateString(),conversation:storeConversation},t=new jsPDF;t.setFont("Helvetica, Arial"),t.setFontType("Normal"),t.setFontSize(20),t.text(105,10,e.title,null,null,"center"),t.setFontSize(14),t.text(105,20,"Fecha: "+e.date,null,null,"center"),t.setLineWidth(.5),t.line(1,25,300,25);var i=20,a=25;for(var s in t.setFontSize(12),e.conversation){i+=12,a+=12,e.conversation[s]=removerEmojis(e.conversation[s]);var o=t.splitTextToSize(e.conversation[s],200);t.text(5,i,o),t.setLineWidth(.2),t.line(1,a,300,a)}t.save(e.date+"- Conversacion.pdf")},toggleConfig=function(){config?(config=!1,$("#chatConfig").css("display","none")):(config=!0,$("#chatConfig").css("display","block"))},timeoutNotificationMsg=function(e){setTimeout(function(){$("#notificationMsg").css("display","none")},e)};const ObjectId=function(e,t,i,a){return Date.now()};function setCookie(e,t,i){var a=new Date;a.setTime(a.getTime()+24*i*60*60*1e3);var s="expires="+a.toGMTString();document.cookie=e+"="+t+";"+s+";path=/"}var getCookie=function(e){for(var t=e+"=",i=decodeURIComponent(document.cookie).split(";"),a=0;a<i.length;a++){for(var s=i[a];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""};function checkCookie(){var e=getCookie("gb-wbchtbt-uid");""===e&&setCookie("gb-wbchtbt-uid",e=ObjectId(),365)}function resetCookie(){setCookie("gb-wbchtbt-uid",ObjectId(),365)}function sendFeedback(e){if("goodAnswer"==e.id){let t={type:"score",chat_id:$(e).parent().parent().attr("id"),score:"1"};websocket.send(JSON.stringify(t))}else{let t={type:"score",chat_id:$(e).parent().parent().attr("id"),score:"0"};websocket.send(JSON.stringify(t))}}function msieversion(){var e=window.navigator.userAgent.indexOf("MSIE ");return isIE=!!(e>0||navigator.userAgent.match(/Trident.*rv\:11\./)),!1}function initVoiceFuncions(){if(!1===isIE){var e=new Artyom;e.initialize({lang:"es-ES",debug:!1,continuous:!1,listen:!0,speed:1}).then(function(){}).catch(function(){});var t=e.newDictation({continuous:!0,onResult:function(e){console.log(e),document.getElementById("message").value=e},onStart:function(){},onEnd:function(){}});startRecognition=function(){e.fatality(),$(document.getElementById("voiceRecord")).html('<i id="voiceIcon" class="fa fa-microphone-slash fa-2x"  onclick="stopRecognition();" aria-hidden="true"></i>'),t.start()},stopRecognition=function(){$(document.getElementById("voiceRecord")).html('<i id="voiceIcon" class="fa fa-microphone fa-2x"  onclick="startRecognition();" aria-hidden="true"></i>'),t.stop(),$("#sendMessageBtn").click()},playVoice=function(e){try{return new Promise(function(t,i){e.className="fa fa-ellipsis-h";var a=new Audio;a.src=e.dataset.voice.replace(/['"]+/g,""),a.type="audio/wav",a.autoplay=!0,a.onerror=i,a.onended=function(){e.className="fa fa-play"}})}catch(e){console.log(e)}}}}function isJson(e){let t=!0;try{JSON.parse(e)}catch(e){t=!1}return t}function mensajeBienvenidaParse(e){var t="";if(!isJson(e))return t=e;var i=JSON.parse(e);if("button"==i.type){if(i.image&&(t+='<div style="text-align: center; height:150px; width:100%; margin-top:5px;"><img src="'+i.image+'" style="max-height:100%"></div>'),i.tittle&&(t+='<h4 id="tittle">'+i.tittle+"</h4>"),i.text&&(t+="<p>"+urlify(i.text)+"</p>",t+="<br>"),i.buttons){for(var a in t+='<div style="text-align: center;">',i.buttons){var s=i.buttons[a];s=JSON.stringify(s),(s=JSON.parse(s)).action||(s={action:"text",text:s}),t+=getHtmlActionButton(s)}return t+="</div>"}}else if("buttonslider"==i.type){var o="slider_"+(new Date).getUTCMilliseconds(),n='<div id="'+o+'" style="position: relative; display: inline-block; vertical-align:middle;">';if(n+='<div class="mySlides" style="display:block;">',i.content[0].image&&(n+='<div style="text-align: center;"><img src="'+i.content[0].image+'" style="width:auto; max-width:70%"></div>'),i.content[0].tittle&&(n+='<h4 id="tittle">'+i.content[0].tittle+"</h4>"),i.content[0].text&&(n+="<p>"+urlify(i.content[0].text)+"</p>"),i.content[0].buttons){for(var a in n+='<div style="text-align: center;">',i.content[0].buttons){s=i.content[0].buttons[a];s=JSON.stringify(s),(s=JSON.parse(s)).action||(s={action:"text",text:s}),n+=getHtmlActionButton(s)}n+="</div>"}n+="</div>";for(let e=1;e<i.content.length;e++){if(n+='<div class="mySlides" style="display:none;">',i.content[e].image&&(n+='<div style="text-align: center;"><img src="'+i.content[e].image+'" style="width:auto; max-width:70%"></div>'),i.content[e].tittle&&(n+='<h4 id="tittle">'+i.content[e].tittle+"</h4>"),i.content[e].text&&(n+="<p>"+urlify(i.content[e].text)+"</p>"),i.content[e].buttons){for(var a in n+='<div style="text-align: center;">',i.content[e].buttons){s=i.content[e].buttons[a];s=JSON.stringify(s),(s=JSON.parse(s)).action||(s={action:"text",text:s}),n+=getHtmlActionButton(s)}n+="</div>"}n+="</div>"}return n+="</div>",n+='<div id="sliders" style="position: relative; display:inline-block; vertical-align: middle ">',n+='<a class="sliderPrev" onclick="showSlides(-1,\''+o+"')\">&#10094;</a>",n+='<a class="sliderNext" onclick="showSlides(1,\''+o+"')\">&#10095;</a>",n+="</div>",n+="</div>"}})攮      ffF.fj   h    O^partitionKey=%28https%2Cbolsadesantiago.com%29,:https://bcs.gatblac.com/release/chatbox/chat-object.js strongly-framed 1 security-info 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 request-method GET response-head HTTP/2 200 
server: nginx
date: Sat, 06 Apr 2024 19:56:29 GMT
content-type: application/javascript; charset=UTF-8
content-length: 72024
x-powered-by: Express
access-control-allow-origin: https://admin-bcs.gatblac.com/
access-control-allow-headers: Origin, X-Requested-With, Content-Type, Accept
accept-ranges: bytes
cache-control: public, max-age=86400
last-modified: Fri, 03 Nov 2023 15:23:08 GMT
etag: W/"11958-18b95c7e760"
X-Firefox-Spdy: h2
 original-response-headers server: nginx
date: Sat, 06 Apr 2024 19:56:29 GMT
content-type: application/javascript; charset=UTF-8
content-length: 72024
x-powered-by: Express
access-control-allow-origin: https://admin-bcs.gatblac.com/
access-control-allow-headers: Origin, X-Requested-With, Content-Type, Accept
accept-ranges: bytes
cache-control: public, max-age=86400
last-modified: Fri, 03 Nov 2023 15:23:08 GMT
etag: W/"11958-18b95c7e760"
X-Firefox-Spdy: h2
 ctid 2 uncompressed-len 0 net-response-time-onstart 1209 net-response-time-onstop 1663  X